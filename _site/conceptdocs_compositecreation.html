<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="CloudCoreo Composite creation">
<meta name="keywords" content=" ">
<title>Composite creation | CloudCoreo Documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://kb.cloudcoreo.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> CloudCoreo Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CloudCoreo Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://www.cloudcoreo.com" target="_blank">Website</a></li>
                        
                        
                        
                        <li><a href="https://github.com/CloudCoreo" target="_blank">Github Repo</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="mydoc_cloudtrail-service-disabled.html">CloudAudit</a></li>
                        
                        
                        
                        <li><a href="conceptdocs_overview.html">Concept Docs</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:info@cloudcoreo.com?subject=CloudCoreo feedback f eedback&body=I have some feedback about the Composite creation page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Composite creation">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          










<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">CloudCoreo Concepts </li>
    
    
    
    <li>
        <a href="#">Composite Concepts</a>
        <ul>
            
            
            
            <li><a href="conceptdocs_overview.html">Overview</a></li>
            
            
            
            
            
            
            <li class="active"><a href="conceptdocs_compositecreation.html">Composite Creation</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_directorystructure.html">Directory Structure</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_advancedcomposites.html">Overriding Inheritance and Anchoring</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_variables.html">Variables</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Composite creation</h1>
</div>



<div class="post-content">

   
    <div class="summary">CloudCoreo Composite creation</div>
   

    

    

    

    <a target="_blank" href="https://github.com/CloudCoreo/CloudCoreo/tree/gh-pages/pages/_pages/conceptdocs/conceptdocs_compositecreation.html.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

  <h2 id="composite-creation">Composite creation</h2>
<p>CloudCoreo enables users to create and layer inheritable cloud reference designs called Composites.  Composites make it easy for teams to reuse, extend, combine, and distribute changes to any cloud infrastructure design. A Composite can specify a single micro-service, a group of services, a complex application, or entire data center definition. Composites include a true software based inheritance approach that makes them a better fundamental building block for cloud infrastructure lifecycle management. A Composite specifies the desired end state of your cloud deployment, including all required resources and service dependencies.  Any supported cloud resource can be included in your design from including networking, security, storage, compute as well as container and serverless functions offered by a cloud provider.</p>

<h3 id="composites">Composites</h3>
<p>There are a number of files and directories that comprise a Composite. These files are stored as part of a repository (repo) in git, the popular version control system. Github and Bitbucket are two examples of hosted git repository services.</p>

<p>Cloud Resources are defined in the <code class="highlighter-rouge">config.rb</code> file. The <code class="highlighter-rouge">config.rb</code> file resides in the <code class="highlighter-rouge">&lt;repo-dir&gt;/services</code> directory and exists to define interactions within the cloud provider in which you are operating.</p>

<p>We define a <strong><em>resource</em></strong> as the actual cloud service you are interacting with, such as a <a href="https://aws.amazon.com/vpc/"><em>VPC</em></a>. Cloud Resources are defined by the desired configuration within your cloud provider account.</p>

<p>The structure of a Cloud Resource is:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">resource</span><span class="o">&gt;</span> <span class="s2">"&lt;name&gt;"</span> <span class="k">do</span>
    <span class="o">&lt;</span><span class="n">property1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">property2</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">property3</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Here is an example of a VPC Cloud Resource:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">coreo_aws_vpc_vpc</span> <span class="s2">"my-vpc"</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:sustain</span>
  <span class="n">cidr</span> <span class="s2">"12.0.0.0/16"</span>
  <span class="n">internet_gateway</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre>
</div>

<p>This Cloud Resource will create a VPC with the CIDR address “12.0.0.0/16” and attach an <em>Internet gateway</em> to the VPC to allow traffic to a public subnet (the public subnet Cloud Resource is assumed to already exist in this example). This example shows statically created Cloud Resources. In many cases, it would be better to use variables which allow you to specify values such as the VPC name and VPC cidr address when you create Composite Plans for each part of your infrastructure.</p>

<h3 id="composite-plans">Composite Plans</h3>
<p>A Composite Plan (Plan) is an instance of your infrastructure design that includes your specified deployment variables and policy controls. The Coreo Engine uses a Plan to deploy and maintain the set of running cloud infrastructure resources.  Plans can be used to partition and drive separate infrastructure and cloud policies.</p>

<p>Plans allow variables to be inserted into the system at runtime, allowing a single Composite to be used in many different environments. The Plan variables can be supplied in a number of ways:</p>

<ul>
  <li>Values provided at Plan creation / modification in the CloudCoreo WebUI</li>
  <li>Values set during the use of the CloudCoreo CLI (called coreo)</li>
  <li>Defaults set in the config.yaml file in the Composite Repository</li>
</ul>

<p>The look of the variables is similar to <em>bash</em> but many “bash-isms” do not apply. To define a variable use <code class="highlighter-rouge">${ }</code> to contain it, for example <code class="highlighter-rouge">${VARIABLE_NAME}</code>. Let’s see what the previous example of the VPC Cloud Resource would be look like with the use of variables for VPC name and VPC cidr octets:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">coreo_aws_vpc_vpc</span> <span class="s2">"${VPC_NAME}"</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:sustain</span>
  <span class="n">cidr</span> <span class="s2">"${VPC_OCTETS}/16"</span>
  <span class="n">internet_gateway</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Plan variables are defined in the <code class="highlighter-rouge">config.yaml</code> file which resides in the <code class="highlighter-rouge">&lt;repository-directory&gt;</code> base directory. Within the <code class="highlighter-rouge">config.yaml</code> file, you can now call out a <code class="highlighter-rouge">VPC_NAME</code> and <code class="highlighter-rouge">VPC_OCTETS</code> variables and apply defaults. In this case, the variable <code class="highlighter-rouge">VPC_NAME</code> and <code class="highlighter-rouge">VPC_OCTETS</code> will show up in the web UI for any users to modify.  This is what the <code class="highlighter-rouge">config.yaml</code> would look like in this case:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="ss">variables:
    </span><span class="no">VPC_NAME</span><span class="p">:</span>
        <span class="ss">required: </span><span class="kp">true</span>
        <span class="ss">description: </span><span class="no">Enter</span> <span class="n">the</span> <span class="nb">name</span> <span class="n">of</span> <span class="n">the</span> <span class="no">VPC</span><span class="o">.</span> <span class="p">(</span><span class="no">Default</span> <span class="n">is</span> <span class="nb">test</span><span class="o">-</span><span class="n">vpc</span><span class="p">)</span>
        <span class="ss">default: </span><span class="nb">test</span><span class="o">-</span><span class="n">vpc</span>
    <span class="no">VPC_OCTETS</span><span class="p">:</span>
        <span class="ss">required: </span><span class="kp">true</span>
        <span class="ss">description: </span><span class="no">Enter</span> <span class="n">the</span> <span class="sr">/16 CIDR address /</span> <span class="n">network</span> <span class="n">of</span> <span class="n">the</span> <span class="no">VPC</span><span class="o">.</span> <span class="p">(</span><span class="no">Default</span> <span class="n">is</span> <span class="mi">10</span><span class="o">.</span><span class="mi">11</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
        <span class="ss">default: </span><span class="mi">10</span><span class="o">.</span><span class="mi">11</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
</code></pre>
</div>

<p>Read more about <a href="conceptdocs_variables.html">CloudCoreo Variables</a> .</p>

<p><strong>Note:</strong> Be careful when you edit your config.yaml file since this file <strong>cannot contain tab characters</strong>. When you do line spacing, use spaces instead.</p>

<hr />

<p>These are the basics concepts of Composite creation. Learn more about Advanced Composite creation at <a href="conceptdocs_advancedcomposites.html"><em>Advanced Composites</em></a> .</p>


    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 CloudCoreo. All rights reserved. <br />
<span>Page last updated:</span> November 9, 2016<br/> Site last generated: Feb 23, 2017 <br />
<p><img src="images/company_logo.png" alt="CloudCoreo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>