<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Granting CloudCoreo access to your AWS account.">
<meta name="keywords" content=" ">
<title>What is the best way to grant CloudCoreo access to my AWS account? | CloudCoreo Documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://kb.cloudcoreo.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> CloudCoreo Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CloudCoreo Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://www.cloudcoreo.com" target="_blank">Website</a></li>
                        
                        
                        
                        <li><a href="https://github.com/CloudCoreo" target="_blank">Github Repo</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="mydoc_cloudtrail-service-disabled.html">CloudAudit</a></li>
                        
                        
                        
                        <li><a href="conceptdocs_overview.html">Concept Docs</a></li>
                        
                        
                        
                        <li class="dropdownActive"><a href="faq_awsrolepolicy.html">FAQs</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:info@cloudcoreo.com?subject=CloudCoreo feedback f eedback&body=I have some feedback about the What is the best way to grant CloudCoreo access to my AWS account? page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="What is the best way to grant CloudCoreo access to my AWS account?">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          










<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">CloudCoreo Concepts </li>
    
    
    
    <li>
        <a href="#">Composite Concepts</a>
        <ul>
            
            
            
            <li><a href="conceptdocs_overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_compositecreation.html">Composite Creation</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_directorystructure.html">Directory Structure</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_advancedcomposites.html">Overriding Inheritance and Anchoring</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_variables.html">Compile Time Variables</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_runtimevariables.html">Run Time Variables</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">What is the best way to grant CloudCoreo access to my AWS account?</h1>
</div>



<div class="post-content">

   
    <div class="summary">Granting CloudCoreo access to your AWS account.</div>
   

    

    

    

    <a target="_blank" href="https://github.com/CloudCoreo/CloudCoreo/tree/gh-pages/pages/_pages/faq/faq_awsrolepolicy.html.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

  <h2 id="cloudcoreo-service-cloud-account-aws-access-and-permissions-faq">CloudCoreo Service Cloud Account (AWS) Access and Permissions FAQ</h2>

<h3 id="granting-cloudcoreo-access-to-your-cloud-account-aws">Granting CloudCoreo Access to your Cloud Account (AWS)</h3>

<p>The ability for the CloudCoreo Service to perform any function in your Cloud Account (AWS) is completely governed by the AWS IAM Role that you create which is used by the AWS AssumeRole functionality control (IAM Roles).</p>

<p>Currently, there are two ways to add a Cloud Account (AWS) to the CloudCoreo Service:</p>

<h4 id="option-1--create-a-cross-account-access-role-in-iam">Option 1 | Create a Cross-Account Access Role in IAM</h4>

<p>Have an administrative user in the target Cloud Account (AWS) create a Cross-Account Access Role in IAM using the CloudCoreo Service AWS “Account ID” and “External ID” to grant access to only the CloudCoreo Service.</p>

<ul>
  <li>The Role privileges can be set to the minimum required by the CloudCoreo Service to perform the requested function.
    <ul>
      <li>Auditing a target Cloud Account only requires a ‘SecurityAudit’ role, while deploying or creating AWS objects such as EC2 instances may require ‘AdministrativeAccess’ or other access permissions.</li>
      <li>Role privileges can be configured very granularly as needed (eg Read Only access for just one AWS service)</li>
    </ul>
  </li>
  <li>
    <p>The Role ARN is then supplied to CloudCoreo Service (see CloudCoreo WebUI picture below)</p>
  </li>
  <li>The Role and/or Role permissions can be disabled / deleted at any time, for example, after a one-time Audit is performed on a target Cloud Account (AWS)
    <ul>
      <li>Deleting the Role would disable the ability to constantly and consistent perform a security audit or deploy infrastructure in the target Cloud Account.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <h6 id="adding-a-cloud-account-using-a-cross-account-access-role-in-the-cloudcoreo-web-ui">Adding a Cloud Account Using a Cross-Account Access Role in the CloudCoreo Web UI</h6>

  <p><img src="http://kb.cloudcoreo.com/images/awsrole2.png" alt="Create a Cross-Account Access Role in IAM" title="Adding a Cloud Account in the CloudCoreo Web UI" /></p>
</blockquote>

<h4 id="option-2--provide-an-iam-users-access-and-secret-key">Option 2 | Provide an IAM user’s Access and Secret Key</h4>

<p>Provide CloudCoreo with an IAM user’s Access and Secret Key. CloudCoreo then creates a Role in the target Cloud Account (AWS) using the Access keys provided.</p>

<ul>
  <li>The Access and Secret Keys are not stored and are only used to create a Role for the CloudCoreo Service.
    <ul>
      <li>AWS credentials are never written to disk.</li>
    </ul>
  </li>
  <li>By default, the CloudCoreo service creates an Role named CloudCoreoAssumedRole with full privileges (except for user creation) in the target Cloud Account.
    <ul>
      <li>Here is the IAM Policy attached to the CloudCoreoAssumedRole in the target account:</li>
    </ul>
  </li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nt">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nt">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"*"</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="nt">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w"> </span><span class="nt">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nt">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"iam:CreateUser"</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="nt">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deny"</span><span class="p">,</span><span class="w"> </span><span class="nt">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li>The Access Keys provided to the CloudCoreo Service can be from any AWS user in the target Cloud Account that has at least the following minimum permissions. (These permissions allow CloudCoreo to create the necessary Role.)</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  </span><span class="nt">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w"> </span><span class="nt">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"iam:GetUser"</span><span class="p">,</span><span class="w"> </span><span class="s2">"iam:CreatePolicy"</span><span class="p">,</span><span class="w"> </span><span class="s2">"iam:GetPolicy"</span><span class="p">,</span><span class="w"> </span><span class="s2">"iam:CreateRole"</span><span class="p">,</span><span class="w"> </span><span class="s2">"iam:GetRole"</span><span class="p">,</span><span class="w"> </span><span class="s2">"iam:AttachRolePolicy"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li>It is recommended that the AWS Access keys provided to CloudCoreo immediately be inactivated and deleted.</li>
  <li>Optionally, AWS user account that generated the keys that were provided to CloudCoreo can also immediately be inactivated and/or deleted.</li>
</ul>

<blockquote>
  <h6 id="adding-a-cloud-account-using-a-access-keys-in-the-cloudcoreo-web-ui">Adding a Cloud Account Using a Access Keys in the CloudCoreo Web UI</h6>

  <p><img src="http://kb.cloudcoreo.com/images/awsrole1.png" alt="Provide an IAM user’s Access and Secret Key" title="Adding a Cloud Account in the CloudCoreo Web UI" /></p>
</blockquote>

<hr />

<h3 id="how-the-cloudcoreo-service-isolates-cloud-accounts-teams-and-plans">How the CloudCoreo Service isolates Cloud Accounts, Teams, and Plans</h3>

<p>Internal to the CloudCoreo Service, there are separate EC2 instances that make the API calls to AWS on behalf of CloudCoreo Service users. These CloudCoreo Service EC2 instances have no ports open to the internet. The communication to AWS happens through queuing systems which are governed by AWS Roles.</p>

<hr />

<h3 id="does-cloudcoreo-store-or-back-up-the-results-from-my-plan-runs">Does CloudCoreo Store or Back-Up the Results from my Plan Runs?</h3>

<p>CloudCoreo Service Plan Run Results are stored for display purposes only. Results stored for display purposes may be deleted by the CloudCoreo Service at any time, however CloudCoreo does maintain encrypted backups of the Results database that may be retained up to 5 years.</p>

<p>Upon request, the CloudCoreo Service can exclude any Plan Run Results from backups, however, CloudCoreo does not guarantee Plan Run Results availability in the case of a complete failure of the Results database (where the Results database needs to be restored from backup).</p>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 CloudCoreo. All rights reserved. <br />
<span>Page last updated:</span> February 23, 2017<br/> Site last generated: Mar 9, 2017 <br />
<p><img src="images/company_logo.png" alt="CloudCoreo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>