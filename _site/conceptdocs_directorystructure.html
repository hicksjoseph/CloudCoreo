<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="CloudCoreo Advanced Composites part 1 - CloudCoreo Directory structure">
<meta name="keywords" content=" ">
<title>Advanced Composites part 1 - CloudCoreo Directory structure | CloudCoreo Documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://kb.cloudcoreo.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> CloudCoreo Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CloudCoreo Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://www.cloudcoreo.com" target="_blank">Website</a></li>
                        
                        
                        
                        <li><a href="https://github.com/CloudCoreo" target="_blank">Github Repo</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="index.html">CloudAudit</a></li>
                        
                        
                        
                        <li><a href="conceptdocs_overview.html">Concept Docs</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:info@cloudcoreo.com?subject=CloudCoreo feedback f eedback&body=I have some feedback about the Advanced Composites part 1 - CloudCoreo Directory structure page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Advanced Composites part 1 - CloudCoreo Directory structure">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          










<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">CloudCoreo Documentation </li>
    
    
    
    <li>
        <a href="#">Getting Started</a>
        <ul>
            
            
            
            <li><a href="conceptdocs_overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_compositecreation.html">Composite Creation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Advanced Topics</a>
        <ul>
            
            
            
            <li><a href="conceptdocs_advancedcomposites.html">Advanced Composite Creation</a></li>
            
            
            
            
            
            
            <li class="active"><a href="conceptdocs_directorystructure.html">Directory Structure</a></li>
            
            
            
            
            
            
            <li><a href="conceptdocs_variables.html">Variables</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Advanced Composites part 1 - CloudCoreo Directory structure</h1>
</div>



<div class="post-content">

   
    <div class="summary">CloudCoreo Advanced Composites part 1 - CloudCoreo Directory structure</div>
   

    

    

    

    <a target="_blank" href="https://github.com/CloudCoreo/CloudCoreo/tree/gh-pages/pages/_pages/conceptdocs/conceptdocs_directorystructure.html.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

  <h2 id="directory-structure">Directory Structure</h2>
<p>CloudCoreo relies on <a href="https://en.wikipedia.org/wiki/Coding_conventions">convention</a> instead of configuration for enabling advanced Composite functionality. There are a number of files and directories that comprise a Composite. These files are stored as part of a repository (repo) in git, the popular version control system. Github and Bitbucket are two examples of hosted git repository services. While each Composite / repository can include any files and code that you would like, there are some directories are reserved for CloudCoreo advanced functionality. In this document, we list those directories and their functions.</p>

<p>The CloudCoreo convention around directory structure precisely dictates to how Composites are actually compiled and executed. The directory structure specifies execution aspects such as inherited infrastructure, server boot script run order, inheritence overrides, and more.  The <a href="http://kb.cloudcoreo.com/conceptdocs_cli.html">CloudCoreo CLI</a> will do much of the work in setting up the correct directory structure, but understanding what each directory convention does is essential.</p>

<h3 id="extending-and-inheriting-composites-from-others">Extending and Inheriting Composites from others</h3>
<p>Often when using Composites, you will want to leverage the best practices of others by inheriting their base infrastructure deployments. You can do this by extending other’s Composites and then adding and/or modifying the execution of their infrastructure to meet your needs. This also allows you to continually inherit changes to their original, if desired, so that you can always be up to date with your infrastructure definitions (and potentially security) or override as aspect of the inherited Composite.</p>

<p>You inherit the base infrastructure of others when you <code class="highlighter-rouge">extend</code> a Composite using the <a href="http://kb.cloudcoreo.com/conceptdocs_cli.html">CloudCoreo CLI</a>. This process creates an <code class="highlighter-rouge">extends</code> directory in your Composite’s repository. Because you are using the base infrastructure of others, anything defined via the <code class="highlighter-rouge">extends</code> directory will be compiled and executed first. <strong>All infrastructure defined in <code class="highlighter-rouge">extends</code> will be completed first before executing anything in any other directory in the Composite repository.</strong></p>

<p><strong>Insert tree diagram here with this <code class="highlighter-rouge">extends-</code> directory highlighted with bold.</strong></p>

<p><strong>Questions: Can there be multiple <code class="highlighter-rouge">extends-</code> directories? If so, in what order will they execute between each other? I think that they will execute alphabetically.</strong></p>

<p><strong>Insert link to more information about inheritance and extends.</strong></p>

<h3 id="composite-">composite-</h3>
<p>Any subdirectory beginning with <code class="highlighter-rouge">composite-</code> is reserved in CloudCoreo. The infrastructure specification in these directories is executed after any infrastructure in the <code class="highlighter-rouge">extends</code> directory at the Composite repository root (if it exists) but before anything else in the current repository. An example of a <code class="highlighter-rouge">composite-</code> directory might be a directory for your tomcat server definition or MongoDB cluster creation.  For example</p>

<p><code class="highlighter-rouge">
 `composite-tomcat`
 `composite-mongodb`
</code></p>

<p>**Insert tree diagram here with an example <code class="highlighter-rouge">composite-</code> directory highlighted with bold.</p>

<p>Using the <code class="highlighter-rouge">composite-</code> directory enables you to specify your own infrastructure that will execute after any <code class="highlighter-rouge">extends-</code> directories in the root of the Composite repository.  **Discuss and give examples of what files would exist in the <code class="highlighter-rouge">composite-</code> directory and what those files might contain.</p>

<p><strong>Insert link to more information about the composite directory and more examples.</strong></p>

<h3 id="services">services</h3>
<p>The <code class="highlighter-rouge">services</code> directory exists to define the composite’s interaction with the particular cloud provider in which the infrastructure is being created. Infrastructure specification is kept in the <code class="highlighter-rouge">config.rb</code> file (<code class="highlighter-rouge">&lt;repo-dir&gt;/services/config.rb</code>) with variables defined in <code class="highlighter-rouge">config.yaml</code> file (<code class="highlighter-rouge">&lt;repo-dir&gt;/config.yaml</code>). Read more about the services directory, config.rb, and config.yaml <a href="http://kb.cloudcoreo.com/conceptdocs_compositecreation.html">here</a>.</p>

<h3 id="boot-scripts">boot-scripts</h3>
<p>The <code class="highlighter-rouge">boot-scripts</code> directory exists to enable you to specify boot time configuration of a particular server. The <code class="highlighter-rouge">boot-scripts</code> directory can exist in one or more places in the Composite repository depending on your infrastructure requirements. You can create a <code class="highlighter-rouge">boot-scripts</code> directory in the root of the repository directory, in a composite- directory, and/or an extends directory. If the boot-scripts directory exists in any of these locations, the Composite will execute the boot scripts in a particular order which is:</p>

<ol>
  <li>The CloudCoreo directory execution convention (<code class="highlighter-rouge">extends</code>, <code class="highlighter-rouge">composite-*</code>). For example:
    <ol>
      <li><code class="highlighter-rouge">&lt;repo-dir&gt;/extends/boot-scripts</code>)</li>
      <li><code class="highlighter-rouge">&lt;repo-dir&gt;/overrides/boot-scripts</code>)</li>
      <li><code class="highlighter-rouge">&lt;repo-dir&gt;/composite-/boot-scripts</code>)</li>
    </ol>
  </li>
  <li>The order specified in an <code class="highlighter-rouge">order.yaml</code> file that is created inside of the particular <code class="highlighter-rouge">boot-scripts</code> directory.</li>
</ol>

<p><strong>To learn more about boot scripts and examples of execution order, read more <a href="http://kb.cloudcoreo.com/conceptdocs_bootscripts.html">here</a></strong>
<strong>To learn more about the format of the <code class="highlighter-rouge">order.yaml</code> file and to see examples, read more <a href="http://kb.cloudcoreo.com/conceptdocs_orderdotyaml.html">here</a>)</strong></p>

<h3 id="operational-scripts">operational-scripts</h3>
<p>The files contained within the <code class="highlighter-rouge">&lt;repo-dir&gt;/operational-scripts</code> directory are scripts you can execute as needed on the particular server from the CloudCoreo WebUI or CLI.</p>

<p><strong>To learn more about operational scripts and to see examples, read more <a href="http://kb.cloudcoreo.com/conceptdocs_operationalscripts.html">here</a></strong></p>

<p><strong>Previously, the CloudCoreo docs specified that “The structure and scripts within the <code class="highlighter-rouge">operational-scripts</code> directory honor the order and overrides defined within the rest of this document.” However, since these operational-scripts are not execution order dependent, a review of the behavior is necessary before documenting the behavior.</strong></p>

<h3 id="shutdown-scripts">shutdown-scripts</h3>
<p>The <code class="highlighter-rouge">&lt;repo-dir&gt;/shutdown-scripts</code> directory contains scripts that CloudCoreo will attempt to run when the particular server is shutting down.</p>

<p><strong>These scripts are used to….. For example, …..</strong></p>

<p><strong>Note:</strong> These scripts are not guaranteed to execute because servers can shut down abnormally or abpruptly.</p>

<p>The <code class="highlighter-rouge">shutdown-scripts</code> directory can exist in one or more places in the Composite repository depending on your infrastructure requirements. You can create a <code class="highlighter-rouge">shutdown-scripts</code> directory in the root of the repository directory, in a composite- directory, and/or an extends directory. If the shutdown-scripts directory exists in any of these locations, the Composite will execute the shutdown scripts in this order:</p>

<p><strong>Previously, the CloudCoreo docs specified that “The structure and scripts within the <code class="highlighter-rouge">shutdown-scripts</code> directory honor the order and overrides defined within the rest of this document.” However, since these operational-scripts are not execution order dependent, a review of the behavior is necessary before documenting the behavior.</strong></p>

<h3 id="overrides">overrides</h3>
<p>When inheriting and extending other’s Composites, you will often need to modifying or prevent the execution of certain aspects of the inherited infrastructure to meet your needs. This is accomplished by the use of the <code class="highlighter-rouge">overrides</code> directory and the Composite infrastructure specifications contained therein. Anything contained in the <code class="highlighter-rouge">overrides</code> directory will act as an override for the Composite in which it is contained. You can override any aspect of a Composite (including Composite inheritance).</p>

<p>The <code class="highlighter-rouge">overrides</code> directory can exist in one or more places in the Composite repository depending on your infrastructure requirements. You can create an <code class="highlighter-rouge">overrides</code> directory in the root of the repository directory, in a composite- directory, and/or an extends directory. If the overrides directory exists in any of these locations, the Composite will override any inherited infrastructure definition that is defined using the exact same convention and structure of the infrastructure specification that it is overriding. The infrastructure specification specified in any particular <code class="highlighter-rouge">overrides</code> directory executes per a specified order.</p>

<p><strong>To learn more about the overrides directory and to see examples as well as execution order, read more <a href="http://kb.cloudcoreo.com/conceptdocs_advancedcomposites.html">here</a></strong></p>

<hr />



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 CloudCoreo. All rights reserved. <br />
<span>Page last updated:</span> November 20, 2016<br/> Site last generated: Nov 26, 2016 <br />
<p><img src="images/company_logo.png" alt="CloudCoreo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>